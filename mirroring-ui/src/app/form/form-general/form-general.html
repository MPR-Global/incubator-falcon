<form id="formGeneralBox"
      name="generalForm"
      class="col-xs-24"
      ng-class="{displayValidations:validation.show}"
      novalidate>
  <div class="row">

    <div class="col-xs-24">
      <label> Dataset Source Name
        <input type="text"
               name="nameInput"
               class="form-control"
               ng-model="model.name"
               placeholder=""
               ng-pattern="validation.patterns.name"
               ng-required="true"/>
      </label>

      <div class="validationError"
           ng-if="generalForm.nameInput.$error.pattern">
        {{validation.messages.name.patternInvalid}}
      </div>
      <div class="validationError"
           ng-if="generalForm.nameInput.$error.required && validation.show">
        {{validation.messages.name.empty}}
      </div>

    </div>

    <div class="col-xs-24 tagsBox mt10">
      <label>Tags

        <div class="row mb10">
          <div class="col-xs-10">
            <input type="text"
                   name="newTagKeyInput"
                   class="form-control"
                   ng-model="newTag.key"
                   placeholder="key"
                   ng-pattern="validation.patterns.alpha" ng-required="newTag.value" />

            <div class="validationError"
                 ng-if="generalForm.newTagKeyInput.$error.pattern">
              {{validation.messages.key.patternInvalid}}
            </div>
            <div class="validationError"
                 ng-if="generalForm.newTagKeyInput.$error.required && validation.show">
              {{validation.messages.key.empty}}
            </div>

          </div>
          <div class="col-xs-10">
            <input type="text"
                   name="newTagValueInput"
                   class="form-control"
                   ng-model="newTag.value"
                   placeholder="value"
                   ng-pattern="validation.patterns.alpha"
                   ng-required="newTag.key" />

            <div class="validationError"
                 ng-if="generalForm.newTagValueInput.$error.pattern">
              {{validation.messages.key.patternInvalid}}
            </div>
            <div class="validationError"
                 ng-if="generalForm.newTagValueInput.$error.required && validation.show">
              {{validation.messages.key.empty}}
            </div>
          </div>
          <div class="col-xs-4">
            <button type="button"
                    class="btn btn-default btn-xs"
                    ng-click="addTag()"
                    ng-disabled="!newTag.key || !newTag.value"
                    ng-disabled="false">
              <span class="glyphicon glyphicon-plus"></span> add tag
            </button>
            </div>
        </div>

        <div ng-repeat="tag in model.tags" class="row">
          <div class="col-xs-10">
            <h6>{{tag.key}}</h6>
          </div>
          <div class="col-xs-10">
            <h6>{{tag.value}}</h6>
          </div>
          <div class="col-xs-4">
            <button type="button"
                    class="btn btn-default btn-xs"
                    ng-click="removeTag($index)"
                    ng-disabled="false">
              <span class="glyphicon glyphicon-minus"></span> delete
            </button>
          </div>
        </div>

      </label>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-24 mt10">
      <label>Dataset type
        <div class="typeButtonsBox">
          <button type="button"
                  ng-class="{active:model.type === 'HDFS'}"
                  class="btn btn-default btn-xs"
                  ng-click="model.type = 'HDFS'">
            HDFS(File System)
          </button>
          <button type="button"
                  ng-class="{active:model.type === 'HIVE'}"
                  class="btn btn-default btn-xs"
                  ng-click="model.type = 'HIVE'">
            HIVE(catalog Storage)
          </button>
        </div>
      </label>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-24 clusterBox">
      <h3>Source cluster</h3>

      <select ng-model="model.clusters.source_cluster.name"
              name="sourceClusterSelect"
              ng-required="true" class="col-xs-24 form-control" id="sourceClusterSelect">
        <option value="" disabled selected style='display:none;'>-Select cluster-</option>

        <option ng-repeat="cluster in clusterList" value="{{cluster.name}}">{{cluster.name}}</option>
      </select>

      <div class="validationError"
           ng-if="generalForm.sourceClusterSelect.$error.required && validation.show">
        {{validation.messages.cluster.empty}}
      </div>

      <div class="locationBox">
        <label>Location:
          <input type="radio"
                 id="sourceHDFSRadio"
                 ng-model="model.clusters.source_cluster.location.type"
                 value="HDFS"
                 ng-required="!model.clusters.source_cluster.location.type"/> HDFS
          <input type="radio"
                 id="sourceAzureRadio"
                 ng-model="model.clusters.source_cluster.location.type"
                 value="azure"
                 ng-required="!model.clusters.source_cluster.location.type"/> Azure
        </label>
      </div>
      <div ng-if="model.clusters.source_cluster.location.type === 'HDFS'">
        <label>Path
          <input type="text"
                 name="sourceClusterPathInput"
                 class="form-control"
                 ng-model="model.clusters.source_cluster.location.src"
                 placeholder="Path"
                 ng-pattern="validation.patterns.osPath"
                 ng-required="model.clusters.source_cluster.location.type === 'HDFS'" />
        </label>
        <div class="validationError"
             ng-if="generalForm.sourceClusterPathInput.$error.pattern">
          {{validation.messages.path.patternInvalid}}
        </div>
        <div class="validationError"
             ng-if="generalForm.sourceClusterPathInput.$error.required && validation.show">
          {{validation.messages.path.empty}}
        </div>

      </div>
      <div ng-if="model.clusters.source_cluster.location.type === 'azure'">
        <label>URL
          <input type="text"
                 name="sourceClusterUrlInput"
                 class="form-control"
                 ng-model="model.clusters.source_cluster.location.src"
                 placeholder="URL"
                 ng-pattern="validation.patterns.url"
                 ng-required="model.clusters.source_cluster.location.type === 'azure'" />
        </label>
        <div class="validationError"
             ng-if="generalForm.sourceClusterUrlInput.$error.pattern">
          {{validation.messages.url.patternInvalid}}
        </div>
        <div class="validationError"
             ng-if="generalForm.sourceClusterUrlInput.$error.required && validation.show">
          {{validation.messages.url.empty}}
        </div>
      </div>
    </div>

    <div class="col-xs-24 clusterBox">
      <h3>Target cluster</h3>
      <select ng-model="model.clusters.target_cluster.name"
              name="targetClusterSelect"
              ng-required="true" class="col-xs-24 form-control" id="targetClusterSelect">
        <option value="" disabled selected style='display:none;'>-Select cluster-</option>
        <option ng-repeat="clusterItem in clusterList" value="{{clusterItem.name}}">{{clusterItem.name}}</option>
      </select>
      <div class="validationError"
           ng-if="generalForm.targetClusterSelect.$error.required && validation.show">
        {{validation.messages.cluster.empty}}
      </div>
      <div class="locationBox">
        <label>Location:
          <input type="radio"
                 id="targetHDFSRadio"
                 ng-model="model.clusters.target_cluster.location.type"
                 value="HDFS"
                 ng-required="!model.clusters.target_cluster.location.type"/> HDFS

          <input type="radio"
                 id="targetAzureRadio"
                 ng-model="model.clusters.target_cluster.location.type"
                 value="azure"
                 ng-required="!model.clusters.target_cluster.location.type"/> Azure
        </label>
      </div>
      <div ng-if="model.clusters.target_cluster.location.type === 'HDFS'">
        <label>Path
          <input type="text"
                 name="targetClusterPathInput"
                 class="form-control"
                 ng-model="model.clusters.target_cluster.location.src"
                 placeholder="Path"
                 ng-pattern="validation.patterns.osPath"
                 ng-required="model.clusters.target_cluster.location.type === 'HDFS'" />
        </label>
        <div class="validationError"
             ng-if="generalForm.targetClusterPathInput.$error.pattern">
          {{validation.messages.path.patternInvalid}}
        </div>
        <div class="validationError"
             ng-if="generalForm.targetClusterPathInput.$error.required && validation.show">
          {{validation.messages.path.empty}}
        </div>
      </div>
      <div ng-if="model.clusters.target_cluster.location.type === 'azure'">
        <label>URL
          <input type="text"
                 name="targetClusterUrlInput"
                 class="form-control"
                 ng-model="model.clusters.target_cluster.location.src"
                 placeholder="URL"
                 ng-pattern="validation.patterns.url"
                 ng-required="model.clusters.target_cluster.location.type === 'azure'" />
        </label>
        <div class="validationError"
             ng-if="generalForm.targetClusterUrlInput.$error.pattern">
          {{validation.messages.url.patternInvalid}}
        </div>
        <div class="validationError"
             ng-if="generalForm.targetClusterUrlInput.$error.required && validation.show">
          {{validation.messages.url.empty}}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-24 mt20">
      <button id="generalNext"
              class="btn nextBtn pull-right"
              ng-click="goNext(generalForm.$invalid, 'form.timing')" >
        Next <img src="css/img/ajax-loader.gif" ng-if="buttonSpinners.show" />
      </button>
      <a class="pull-right" ui-sref="main">
        Cancel
      </a>
    </div>
  </div>

</form>


