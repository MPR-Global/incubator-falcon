From c80c0a9695fa2fdabce27ab6587ef07eef087d73 Mon Sep 17 00:00:00 2001
From: Armando Reyna <armando.reyna@globant.com>
Date: Fri, 27 Mar 2015 14:08:33 -0600
Subject: [PATCH] Stage05

---
 LICENSE.txt                        |  9 ++++
 docs/license/grunt-cli-LICENCE.txt | 22 +++++++++
 docs/license/node-LICENCE.txt      | 18 +++++++
 docs/license/npm-LICENCE.txt       | 17 +++++++
 falcon-ui/Installation-steps.txt   | 47 +++++++++++++++++++
 falcon-ui/package.json             |  1 +
 falcon-ui/pom.xml                  | 96 ++++++++++++++++++++++----------------
 7 files changed, 170 insertions(+), 40 deletions(-)
 create mode 100644 docs/license/grunt-cli-LICENCE.txt
 create mode 100644 docs/license/node-LICENCE.txt
 create mode 100644 docs/license/npm-LICENCE.txt
 create mode 100644 falcon-ui/Installation-steps.txt

diff --git a/LICENSE.txt b/LICENSE.txt
index 05eba55..13cb1dc 100644
--- a/LICENSE.txt
+++ b/LICENSE.txt
@@ -225,3 +225,12 @@ MIT license. For details, see docs/license/dust-helpers-LICENSE.txt
 
 This product bundles jquery 1.11.0, which is available under a
 MIT license. For details, see docs/license/jquery-LICENSE.txt
+
+This product bundles npm 1.4.3, which is available under a
+MIT license. For details, see docs/license/npm-LICENSE.txt
+
+This product bundles node 0.10.30, which is available under a
+MIT license. For details, see docs/license/node-LICENSE.txt
+
+This product bundles grunt-cli, which is available under a
+MIT license. For details, see docs/license/grunt-cli-LICENSE.txt
\ No newline at end of file
diff --git a/docs/license/grunt-cli-LICENCE.txt b/docs/license/grunt-cli-LICENCE.txt
new file mode 100644
index 0000000..4e51824
--- /dev/null
+++ b/docs/license/grunt-cli-LICENCE.txt
@@ -0,0 +1,22 @@
+Copyright (c) 2014 Tyler Kellen, contributors
+
+Permission is hereby granted, free of charge, to any person
+obtaining a copy of this software and associated documentation
+files (the "Software"), to deal in the Software without
+restriction, including without limitation the rights to use,
+copy, modify, merge, publish, distribute, sublicense, and/or sell
+copies of the Software, and to permit persons to whom the
+Software is furnished to do so, subject to the following
+conditions:
+
+The above copyright notice and this permission notice shall be
+included in all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
+OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
+HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
+WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
+OTHER DEALINGS IN THE SOFTWARE.
\ No newline at end of file
diff --git a/docs/license/node-LICENCE.txt b/docs/license/node-LICENCE.txt
new file mode 100644
index 0000000..e81b287
--- /dev/null
+++ b/docs/license/node-LICENCE.txt
@@ -0,0 +1,18 @@
+Copyright Joyent, Inc. and other Node contributors. All rights reserved.
+Permission is hereby granted, free of charge, to any person obtaining a copy
+of this software and associated documentation files (the "Software"), to
+deal in the Software without restriction, including without limitation the
+rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
+sell copies of the Software, and to permit persons to whom the Software is
+furnished to do so, subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in
+all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+IN THE SOFTWARE.
\ No newline at end of file
diff --git a/docs/license/npm-LICENCE.txt b/docs/license/npm-LICENCE.txt
new file mode 100644
index 0000000..ccd72b7
--- /dev/null
+++ b/docs/license/npm-LICENCE.txt
@@ -0,0 +1,17 @@
+Copyright (c) npm, Inc. and Contributors All rights reserved.
+
+npm is released under the Artistic License 2.0, subject to additional terms that are listed below.
+
+The text of the npm License follows and the text of the additional terms follows the Artistic License 2.0 terms:
+
+The Artistic License 2.0
+
+Copyright (c) 2000-2006, The Perl Foundation.
+
+Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.
+
+Preamble
+
+This license establishes the terms under which a given free software Package may be copied, modified, distributed, and/or redistributed. The intent is that the Copyright Holder maintains some artistic control over the development of that Package while still keeping the Package available as open source and free software.
+
+You are always permitted to make arrangements wholly outside of this license directly with the Copyright Holder of a given Package. If the terms of this license do not permit the full use that you propose to make of the Package, you should contact the Copyright Holder and seek a different licensing arrangement.
\ No newline at end of file
diff --git a/falcon-ui/Installation-steps.txt b/falcon-ui/Installation-steps.txt
new file mode 100644
index 0000000..3f9968d
--- /dev/null
+++ b/falcon-ui/Installation-steps.txt
@@ -0,0 +1,47 @@
+# Licensed to the Apache Software Foundation (ASF) under one
+# or more contributor license agreements.  See the NOTICE file
+# distributed with this work for additional information
+# regarding copyright ownership.  The ASF licenses this file
+# to you under the Apache License, Version 2.0 (the
+# "License"); you may not use this file except in compliance
+# with the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+A. Building & Installing Falcon-UI
+===============================
+
+0. Prerequisites
+------------------
+
+You would need the following installed:
+
+* JDK 1.7+
+* Maven 3.x+
+
+1. Building Falcon
+------------------
+
+* cd falcon-ui
+* mvn clean install
+
+
+2. Deploying Falcon to sandbox
+-------------------
+
+- grunt deploy
+This will build and send to the sandbox /usr/hdp/2.2.0.0-913/falcon/webapp/falcon/public/ location the falcon webapp
+Then navigate to localhost:15000
+
+
+3. To test in the express server
+-------------------
+- grunt dev
+This will launch an express server with the falcon-ui to localhost:3000
+(You can test there all UI related behaviours and express will mock all falcon REST calls)
\ No newline at end of file
diff --git a/falcon-ui/package.json b/falcon-ui/package.json
index 8278655..dda4855 100644
--- a/falcon-ui/package.json
+++ b/falcon-ui/package.json
@@ -15,6 +15,7 @@
     "express": "~4.0.0",
     "file": "~0.2.2",
     "grunt": "~0.4.4",
+    "grunt-cli": "~0.1.9",
     "grunt-contrib-clean": "^0.6.0",
     "grunt-contrib-copy": "~0.5.0",
     "grunt-contrib-concat": "^0.5.0",
diff --git a/falcon-ui/pom.xml b/falcon-ui/pom.xml
index 6b177b3..337ab35 100644
--- a/falcon-ui/pom.xml
+++ b/falcon-ui/pom.xml
@@ -21,7 +21,7 @@
   <parent>
     <groupId>org.apache.falcon</groupId>
     <artifactId>falcon-main</artifactId>
-    <version>0.7-SNAPSHOT</version>    
+    <version>0.7-SNAPSHOT</version>
   </parent>
   <artifactId>falcon-ui</artifactId>
   <packaging>pom</packaging>
@@ -29,6 +29,7 @@
   <description>Apache Falcon UI Application</description>
   <build>
     <plugins>
+
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-antrun-plugin</artifactId>
@@ -51,52 +52,66 @@
               </target>
             </configuration>
           </execution>
+        </executions>
+      </plugin>
+
+      <plugin>
+        <groupId>com.github.eirslett</groupId>
+        <artifactId>frontend-maven-plugin</artifactId>
+        <version>0.0.14</version>
+        <executions>
+
           <execution>
-            <id>compile</id>
-            <phase>compile</phase>
+            <id>install node and npm</id>
             <goals>
-              <goal>run</goal>
+              <goal>install-node-and-npm</goal>
             </goals>
             <configuration>
-              <target name="falcon-ui-compile">
-		<exec dir="${basedir}" executable="npm">
-                  <arg value="install"/>
-                </exec>
-                <exec dir="${basedir}" executable="grunt" failonerror="true">
-                  <arg value="build"/>
-                </exec>
-              </target>
+              <nodeVersion>v0.10.30</nodeVersion>
+              <npmVersion>1.4.3</npmVersion>
             </configuration>
           </execution>
+
           <execution>
-            <id>test</id>
-            <phase>test</phase>
+            <id>npm install</id>
             <goals>
-              <goal>run</goal>
+              <goal>npm</goal>
             </goals>
             <configuration>
-              <target name="falcon-ui unit tests" unless="${skipTests}">
-                <exec dir="${basedir}" executable="grunt" failonerror="true">
-                  <arg value="test"/>
-                </exec>
-              </target>
+              <arguments>install</arguments>
             </configuration>
           </execution>
 
           <execution>
-            <id>package</id>
-            <phase>package</phase>
+            <id>grunt build</id>
             <goals>
-              <goal>run</goal>
+              <goal>grunt</goal>
             </goals>
             <configuration>
-              <target name="falcon-ui package">
-                <exec dir="${basedir}" executable="grunt">
-                  <arg value="copy:webapp"/>
-                </exec>
-              </target>
+              <arguments>build</arguments>
             </configuration>
           </execution>
+
+          <execution>
+            <id>grunt test</id>
+            <goals>
+              <goal>grunt</goal>
+            </goals>
+            <configuration>
+              <arguments>test</arguments>
+            </configuration>
+          </execution>
+
+          <execution>
+            <id>grunt copy</id>
+            <goals>
+              <goal>grunt</goal>
+            </goals>
+            <configuration>
+              <arguments>copy:webapp</arguments>
+            </configuration>
+          </execution>
+
         </executions>
       </plugin>
 
@@ -106,21 +121,22 @@
         <configuration>
           <excludes>
             <exclude>app/js/lib/**</exclude>
-	    <exclude>app/css/bootstrap/**</exclude>
-	    <exclude>app/test/lib/**</exclude>
-	    <exclude>app/css/fonts/**</exclude>
-	    <exclude>app/config/loginData.js</exclude>
-	    <exclude>dist/**</exclude>
+            <exclude>app/css/bootstrap/**</exclude>
+            <exclude>app/test/lib/**</exclude>
+            <exclude>app/css/fonts/**</exclude>
+            <exclude>app/config/loginData.js</exclude>
+            <exclude>dist/**</exclude>
+            <exclude>node/**</exclude>
 	    <exclude>node_modules/**</exclude>
-	    <exclude>package.json</exclude>
-	    <exclude>bower.json</exclude>
-	    <exclude>karma.conf.js</exclude>
-	    <exclude>bower.json</exclude>
-	    <exclude>app/css/main.css</exclude>
-	    <exclude>app/test/e2e/protractor.js</exclude>
+            <exclude>package.json</exclude>
+            <exclude>bower.json</exclude>
+            <exclude>karma.conf.js</exclude>
+            <exclude>bower.json</exclude>
+            <exclude>app/css/main.css</exclude>
+            <exclude>app/test/e2e/protractor.js</exclude>
           </excludes>
         </configuration>
-      </plugin>	
+      </plugin>
 
     </plugins>
   </build>
-- 
2.1.0

